!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["skyline-component-image-capture"]=t():e["skyline-component-image-capture"]=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.i18n={modal_title:"Upload New Image",modal_close:"Close",modal_description:"Here you can choose and upload images to your application",modal_cancel:"Cancel",modal_accept:"Upload",quality_title:"Quality",quality_perfect:"Perfect",quality_OK:"OK",quality_sufficient:"Sufficient",quality_scarce:"Scarce",quality_insufficient:"insufficient",ratio_title:"Aspect Ratio",ratio_bad:"Bad ratio (required 16:9 until 1:1)",dimension_title:"Dimension",size_title:"Size",property_slug_error:"Slug must only contain latin characters",image_load_error:"Could not load the image.",property_slug_label:"Slug",property_slug_placeholder:"my-file",property_caption_label:"Caption",property_caption_placeholder:"My Image",property_alt_label:"Alt",property_alt_placeholder:"Text in error case",options_label:"Options",option_scale_to_best:"Scale to optimal size",option_render_preview:"Render preview",option_make_watermark:"Render Watermark"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileChecker=void 0;var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=(r=i)&&r.__esModule?r:{default:r},l=n(3);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.FileChecker=function(e){function t(){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"renderTemplate",value:function(){var e=(0,a.default)(this.template);return this.bindTemplate(e),e}},{key:"bindTemplate",value:function(e){}},{key:"reset",value:function(){}},{key:"checkImage",value:function(e,t){}},{key:"template",get:function(){return""}}]),t}(l.Renderable)},function(e,t,n){"use strict";if(Object.defineProperty(t,"__esModule",{value:!0}),!window.jQuery)throw new Error("The skyline component 'image-capture' requires jquery.");t.default=window.jQuery},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.Renderable=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"renderTemplate",value:function(){}},{key:"reset",value:function(){}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._limits=void 0;var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(15),l=n(5),u=n(1),c=n(6),s=n(2),p=(r=s)&&r.__esModule?r:{default:r},f=n(16),d=n(8),h=n(9),y=n(10),v=n(0),b=n(17),m=n(11),_=n(12),g=n(18),w=n(19),k=n(20),O=n(13);var j=t._limits={FILE_SIZE:2e6,UPLOADS:20,POST_SIZE:8e6},P={panel:a._panel,property:l._property,option:_._option},E=(0,p.default)(P.panel);(0,p.default)((function(){(0,p.default)(document.body).append(E)}));var C=function(e){function t(e){var n=e.checkers,r=void 0===n?null:n,o=e.properties,i=void 0===o?null:o,a=e.options,l=void 0===a?null:a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,new k.Events));return u.checkers=[],u.properties=new Map,u.options=new Map,u.view=new f.ImageCaptureView(u,E),r&&r.forEach((function(e){return u.addChecker(e)})),i&&i.forEach((function(e){return u.addProperty(e)})),l&&l.forEach((function(e){return u.addOption(e)})),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"LIMITS",get:function(){return j}},{key:"TEMPLATES",get:function(){return P}}]),i(t,[{key:"addChecker",value:function(e){return e instanceof u.FileChecker&&(this.checkers.push(e),this.view.addChecker(e)),this}},{key:"removeChecker",value:function(e){var t=this.checkers.indexOf(e);return!1!==t&&(delete this.checkers[t],this.view.removeChecker(e)),this}},{key:"clearCheckers",value:function(){var e=this;this.checkers.forEach((function(t){return e-e.removeChecker(t)}))}},{key:"addProperty",value:function(e){return e instanceof c.Property&&(this.properties.set(e.name,e),this.view.addProperty(e)),this}},{key:"removeProperty",value:function(e){e instanceof c.Property&&(e=e.name);var t=this.properties.get(e);return t&&this.view.removeProperty(t),this.properties.delete(e),this}},{key:"clearProperties",value:function(){var e=this;this.properties.forEach((function(t){return e-e.removeProperty(t)}))}},{key:"addOption",value:function(e){return"number"==typeof e.id&&(this.options.set(e.id,e),this.view.addOption(e)),this}},{key:"removeOption",value:function(e){"object"===(void 0===e?"undefined":o(e))&&(e=e.id);var t=this.options.get(e);return t&&this.view.removeOption(t),this.options.delete(e),this}},{key:"clearOptions",value:function(){var e=this;this.options.forEach((function(t){return e-e.removeOption(t)}))}},{key:"run",value:function(e){this.checkers.forEach((function(e){return e.reset()})),this.properties.forEach((function(e){return e.reset()})),this.view.propertyEl.find(".alert").remove(),this.view.runModal()}},{key:"updateFromInput",value:function(e){var t=this,n=e.files[0];if(/^image\/.+/.test(n.type)){var r=new FileReader;r.onload=function(){var e=t.view.imageEl;e.onload=function(){t.file=n,t.view.fileInfo.show(),t.view.fileSelect.hide();var r=new Image;t.image=r,r.src=e.src;var o=!0;t.checkers.forEach((function(e){o=e.checkImage(r,n)&&o})),t.properties.forEach((function(e){return e.willAppear(r,n)})),t.options.forEach((function(e){"function"==typeof e.willAppear&&e.willAppear(r,n,t.view.options.get(e).find("input")[0])})),o&&t.view.saveButton.attr("disabled",!1),t.trigger("update",{file:n,image:r})},e.onerror=function(){t.view.presentError(v.i18n.image_load_error,"error"),t.trigger("error")},e.src=r.result},r.readAsDataURL(n)}}},{key:"validateAndSave",value:function(){var e=this;this.view.propertyEl.find(".alert").remove();try{this.properties.forEach((function(t){t.validate(e.image,e.file)}))}catch(e){this.view.propertyEl.prepend("<div class='alert alert-danger'>"+e.message+"</div>")}var t={};this.properties.forEach((function(e){return t[e.name]=e.value}));var n=0;this.options.forEach((function(e){n|=e.value})),this.view.progressEl.show();var r=function(t){t=Math.round(100*t),e.view.progressEl.find(".progress-bar").css("width",t+"%").attr("aria-valuenow",t).text(t+"%")};r(0),this.trigger("save",{file:this.file,image:this.image,options:n,properties:t,progress:r,done:function(){e.view._skip_c=!0,e.cancel(),e.view._skip_c=!1}})}},{key:"cancel",value:function(){this.view.el.modal("hide")}}]),t}(w.Emitter);t.default=new C({checkers:[new d.QualityChecker(d.QualityChecker.qualityBreakpoints),new O.RatioChecker(16/9),new h.DimensionChecker,new y.FileSizeChecker],properties:[new b.SlugTextFieldProperty({name:"slug",label:v.i18n.property_slug_label,placeholder:v.i18n.property_slug_placeholder,icon:"fa-globe"}),new m.TextFieldProperty({name:"caption",label:v.i18n.property_caption_label,placeholder:v.i18n.property_caption_placeholder,icon:"fa-tag"}),new m.TextFieldProperty({name:"alt",label:v.i18n.property_alt_label,placeholder:v.i18n.property_alt_placeholder,icon:"fa-bolt"})],options:[new g.Option({id:1,label:v.i18n.option_scale_to_best,checkedByDefault:!0}),new g.Option({id:2,label:v.i18n.option_render_preview,checkedByDefault:!0}),new g.Option({id:4,label:v.i18n.option_make_watermark,checkedByDefault:!1})]})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t._property=function(e){return'<div class="form-group row">\n                            <label for="'+e.id+'" class="col-lg-2 col-form-label">'+e.label+'</label>\n                            <div class="col-lg-10">\n                                <div class="input-group">\n                                    <div class="input-group-prepend">\n                                        <span class="input-group-text"><i class="fa '+e.icon+'"></i></span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Property=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(2)),i=n(5),a=n(3),l=u(n(7));function u(e){return e&&e.__esModule?e:{default:e}}t.Property=function(e){function t(e){var n=e.name,r=e.label,a=void 0===r?null:r,u=e.icon,c=void 0===u?null:u,s=e.placeholder,p=void 0===s?null:s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var f=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return f.id=l.default.guid(),f.name=n,f.renderTemplate=function(){var e=(0,o.default)("function"==typeof i._property?(0,i._property)({id:f.id,label:a,icon:c}):i._property),t=(0,o.default)("function"==typeof f.template?f.template({id:f.id,placeholder:p}):f.template);return f.bindTemplate(e,t),e},f}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"template",get:function(){return function(e){e.id,e.placeholder;return""}}}]),r(t,[{key:"renderTemplate",value:function(){}},{key:"bindTemplate",value:function(e,t){e.find(".input-group").append(t),this.bound=e,this.boundI=t}},{key:"validate",value:function(e,t){return!0}},{key:"willAppear",value:function(e,t){}},{key:"value",get:function(){return this.boundI.val()}}]),t}(a.Renderable)},function(e,t,n){"use strict";if(Object.defineProperty(t,"__esModule",{value:!0}),!window.Skyline)throw new Error("The skyline component 'image-capture' requires component Skyline.");t.default=window.Skyline},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QualityChecker=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),i=n(0);var a=[{q:0,l:i.i18n.quality_insufficient,c:"danger",ok:!1},{q:768,l:i.i18n.quality_scarce,c:"warning",ok:!0},{q:1439,l:i.i18n.quality_sufficient,c:"warning",ok:!0},{q:1919,l:i.i18n.quality_sufficient,c:"success",ok:!0},{q:2e5,l:i.i18n.quality_perfect,c:"success",ok:!0}];t.QualityChecker=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.breakpoints=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"template",get:function(){return'<li class="list-group-item d-flex justify-content-between p-1">\n                                <strong>'+i.i18n.quality_title+"</strong>\n                                <span></span>\n                            </li>\n"}}],[{key:"qualityBreakpoints",get:function(){return a}}]),r(t,[{key:"bindTemplate",value:function(e){this.boundClass=e,this.boundQ=e.find("span")}},{key:"reset",value:function(){this.boundClass.removeClass("list-group-item-success").removeClass("list-group-item-warning").removeClass("list-group-item-danger"),this.boundQ.html("")}},{key:"checkImage",value:function(e,t){var n=Math.max(e.width,e.height),r="",o="",i=!0;return this.breakpoints.forEach((function(e){(""===r||n>e.q)&&(r=e.c,o=e.l,i=e.ok)})),""!==r&&this.boundClass.addClass("list-group-item-"+r),this.boundQ.html(o),i}}]),t}(o.FileChecker)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DimensionChecker=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),i=n(0);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.DimensionChecker=function(e){function t(){return a(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"bindTemplate",value:function(e){this.bound=e.find("span")}},{key:"reset",value:function(){this.bound.html("")}},{key:"checkImage",value:function(e,t){return this.bound.html(e.width+"x"+e.height),!0}},{key:"template",get:function(){return'<li class="list-group-item d-flex justify-content-between p-1">\n                                <strong>'+i.i18n.dimension_title+"</strong>\n                                <span></span>\n                            </li>\n"}}]),t}(o.FileChecker)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileSizeChecker=void 0;var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),a=n(0),l=n(4),u=n(7),c=(r=u)&&r.__esModule?r:{default:r};function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.FileSizeChecker=function(e){function t(){return s(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"bindTemplate",value:function(e){this.bound=e,this.boundQ=e.find("span")}},{key:"reset",value:function(){this.bound.removeClass("list-group-item-danger"),this.boundQ.html("-.-")}},{key:"checkImage",value:function(e,t){return this.boundQ.html(c.default.Byte.format(t.size)),!(t.size>l._limits.FILE_SIZE||t.size>l._limits.POST_SIZE)||(this.bound.addClass("list-group-item-danger"),!1)}},{key:"template",get:function(){return'<li class="list-group-item d-flex justify-content-between p-1">\n                                <strong>'+a.i18n.size_title+"</strong>\n                                <span></span>\n                            </li>\n"}}]),t}(i.FileChecker)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextFieldProperty=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(6);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.TextFieldProperty=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"template",get:function(){return function(e){var t=e.id;return'<input type="text" class="form-control" placeholder="'+e.placeholder+'" id="'+t+'" value="">'}}}]),t}(o.Property)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t._option=function(e,t,n){return"<div><input id='option-"+e+'\' class="sky-checkbox" type="checkbox" value="'+t+'"> <label for="option-'+e+'">'+n+"</label></div>"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RatioChecker=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),i=n(0);t.RatioChecker=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.ratio=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"bindTemplate",value:function(e){this.bound=e}},{key:"reset",value:function(){this.bound.addClass("d-none").removeClass("d-flex")}},{key:"checkImage",value:function(e,t){var n=e.width/e.height;return n<this.ratio&&n>1/this.ratio?(this.bound.addClass("d-none").removeClass("d-flex"),!0):(this.bound.removeClass("d-none").addClass("d-flex"),!1)}},{key:"template",get:function(){return'<li class="list-group-item d-flex justify-content-between p-1 list-group-item-danger">\n                                <strong>'+i.i18n.ratio_title+"</strong>\n                                <span>"+i.i18n.ratio_bad+"</span>\n                            </li>\n"}}]),t}(o.FileChecker)},function(e,t,n){"use strict";var r,o,i=n(4),a=(r=i)&&r.__esModule?r:{default:r},l=n(1),u=n(8),c=n(13),s=n(9),p=n(10);o=window.Skyline,Object.assign(o,{ImageCapture:a.default,Checker:{FileChecker:l.FileChecker,QualityChecker:u.QualityChecker,RatioChecker:c.RatioChecker,DimensionChecker:s.DimensionChecker,FileSizeChecker:p.FileSizeChecker}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._panel=void 0;var r=n(0);t._panel='<div class="modal fade" id="sky-it-capture-modal" tabindex="-1" role="dialog" aria-labelledby="sky-it-capture-modal-titel"\n     aria-hidden="true">\n    <div class="modal-dialog" role="document">\n        <div class="modal-content">\n            <div class="modal-header alert-primary">\n                <h5 class="modal-title" id="sky-it-capture-modal-titel">'+r.i18n.modal_title+'</h5>\n                <button type="button" class="close" data-dismiss="modal" aria-label="'+r.i18n.modal_close+'">\n                    <span aria-hidden="true">&times;</span>\n                </button>\n            </div>\n            <div class="modal-body">\n                    <p>\n'+r.i18n.modal_description+'                    </p>\n                    <div class="form-group file-select" data-placeholder="Or put here">\n                        <label> </label>\n                        <input type="file" class="form-control" accept=\'image/jpeg,image/png,image/gif,image/bmp,image/tiff\'>\n                    </div>\n                    <div class="file-info">\n                        <figure class="figure w-100 text-center">\n                            <img class="w-75 img-fluid rounded shadow" src="" alt="">\n                        </figure>\n                        <ul class="list-group">\n                        </ul>\n\n                        <hr class="my-2">\n                        <div class=\'property-container\'></div>                            <div class="form-group row">\n                            <label for="" class="col-lg-2 col-form-label">'+r.i18n.options_label+'</label>\n                            <div class="col-md-9 pt-1">\n                                <div class="option-container"></div>\n                            </div>\n                        </div>\n                        <div class="progress">\n                            <div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25"\n                                 aria-valuemin="0" aria-valuemax="100">25%\n                            </div>\n                        </div>\n            </div>\n        </div>\n        <div class="modal-footer d-flex justify-content-between">\n            <button type="button" class="btn btn-sm btn-outline-danger" data-dismiss="modal">'+r.i18n.modal_cancel+'</button>\n            <button type="button" class="btn btn-sm btn-outline-success" data-role="update">'+r.i18n.modal_accept+"</button>\n        </div>\n    </div>\n</div>"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.ImageCaptureView=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=n,this._skip_c=!1,n.on("hide.bs.modal",(function(){r._skip_c||t.trigger("cancel")})),this.checkerEl=n.find(".list-group"),this.propertyEl=n.find(".property-container"),this.optionEl=n.find(".option-container"),this.fileSelect=n.find(".file-select"),this.fileInput=this.fileSelect.find("input[type='file']"),this.fileInfo=n.find(".file-info"),this.imageEl=this.fileInfo.find("img")[0],this.progressEl=n.find(".progress"),this.saveButton=n.find("button[data-role='update']"),this.checkers=new Map,this.properties=new Map,this.options=new Map,this.fileInput.on("change",(function(e){return t.updateFromInput(r.fileInput[0])})),this.saveButton.on("click",(function(e){return t.validateAndSave()}))}return r(e,[{key:"runModal",value:function(){this.fileInput.val(""),this.fileSelect.show(),this.fileInfo.hide(),this.progressEl.hide(),this.fileInfo.find("alert").remove(),this.saveButton.attr("disabled","disabled"),this.el.modal("show")}},{key:"presentError",value:function(e,t){this.fileInfo.prepend("<div class='alert alert-"+t+"'>"+e+"</div>")}},{key:"addChecker",value:function(e){if(!this.checkers.has(e)){var t=e.renderTemplate();this.checkerEl.append(t),this.checkers.set(e,t)}}},{key:"removeChecker",value:function(e){this.checkers.has(e)&&(this.checkers.get(e).remove(),this.checkers.delete(e))}},{key:"addProperty",value:function(e){if(!this.properties.has(e)){var t=e.renderTemplate();this.propertyEl.append(t),this.properties.set(e,t)}}},{key:"removeProperty",value:function(e){this.properties.has(e)&&(this.properties.get(e).remove(),this.properties.delete(e))}},{key:"addOption",value:function(e){if(!this.options.has(e)){var t=e.renderTemplate();this.optionEl.append(t),this.options.set(e,t)}}},{key:"removeOption",value:function(e){this.options.has(e)&&(this.options.get(e).remove(),this.options.delete(e))}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SlugTextFieldProperty=void 0;var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},a=n(11),l=n(2),u=(r=l)&&r.__esModule?r:{default:r},c=n(0);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.SlugTextFieldProperty=function(e){function t(){return s(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"bindTemplate",value:function(e,n){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"bindTemplate",this).call(this,e,n);var r=(0,u.default)('<div class="input-group-append"><span class="input-group-text"></span></div>');this.boundE=r.find("span"),e.find(".input-group").append(r)}},{key:"validate",value:function(e,t){if(/^[a-zA-Z0-9_.\-]+$/.test(this.value))return!0;throw new Error(c.i18n.property_slug_error)}},{key:"willAppear",value:function(e,t){var n=t.name.replace(/[^a-zA-Z0-9_.]/g,"-");n=n.split("."),this.extension=n.pop().toLowerCase(),this.boundE.text("."+this.extension),this.boundI.val(n.join("."))}},{key:"value",get:function(){var e=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this);return e.split(".").pop()===this.boundE.text()?e:e+this.boundE.text()}}]),t}(a.TextFieldProperty)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Option=void 0;var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),a=n(12),l=n(2),u=(r=l)&&r.__esModule?r:{default:r};t.Option=function(e){function t(e){var n=e.id,r=e.label,o=e.checkedByDefault,i=void 0!==o&&o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return l.id=n,l.label=r,l.checked=i,l.renderTemplate=function(){var e=(0,u.default)("function"==typeof a._option?(0,a._option)(l.id,l.id,r):a._option);return l.bindTemplate(e),e},l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"reset",value:function(){this.boundI[0].checked=this.checked}},{key:"bindTemplate",value:function(e){this.bound=e,this.boundI=e.find("input")}},{key:"willAppear",value:function(e,t,n){n.checked=this.checked}},{key:"value",get:function(){return this.boundI[0].checked?1*this.boundI[0].value:0}}]),t}(i.Renderable)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.Emitter=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events=t instanceof e?t.events:t.handlers}return r(e,[{key:"on",value:function(e,t){var n=this;return("string"==typeof e?e.split(" "):e).forEach((function(e){if(!n.events[e])throw new Error("The event "+e+" does not exist");n.events[e].push(t)})),this}},{key:"trigger",value:function(e,t){if(!(e in this.events))throw new Error("The event "+e+" cannot be triggered");var n=!0,r=this;return this.events[e].forEach((function(e){"function"==typeof e&&(n=e.call(r,t)&&n)})),n}},{key:"bind",value:function(e){if(this.events[e])throw new Error("The event "+e+" is already bound");this.events[e]=[]}},{key:"exists",value:function(e){return Array.isArray(this.events[e])}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Events=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.handlers={update:[],error:[console.error],save:[],cancel:[]}}}])}));